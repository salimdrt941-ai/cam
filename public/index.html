<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دردشة عشوائية - تواصل مع العالم</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1><i class="fas fa-comments"></i> دردشة عشوائية</h1>
            <p>تواصل فورياً مع أشخاص من حول العالم</p>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Welcome Screen -->
            <div id="welcome-screen" class="screen active">
                <div class="welcome-card">
                    <h2>مرحباً بك في منصة الدردشة العشوائية</h2>
                    <p>تواصل مع أشخاص جدد من جميع أنحاء العالم عبر النص أو الفيديو</p>
                    <div class="features">
                        <div class="feature">
                            <i class="fas fa-bolt"></i>
                            <span>تواصل فوري</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-globe"></i>
                            <span>مستخدمون من العالم</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-shield-alt"></i>
                            <span>آمن ومجهول</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-video"></i>
                            <span>دردشة نصية وفيديو</span>
                        </div>
                    </div>
                    <button id="start-chat-btn" class="btn btn-primary">
                        <i class="fas fa-play"></i>
                        ابدأ الدردشة
                    </button>
                </div>
            </div>

            <!-- Waiting Screen -->
            <div id="waiting-screen" class="screen">
                <div class="waiting-card">
                    <div class="spinner"></div>
                    <h3>جاري البحث عن شريك...</h3>
                    <p>يرجى الانتظار بينما نبحث عن شخص متاح للدردشة</p>
                    <button id="cancel-search-btn" class="btn btn-secondary">
                        <i class="fas fa-times"></i>
                        إلغاء البحث
                    </button>
                </div>
            </div>

            <!-- Chat Screen -->
            <div id="chat-screen" class="screen">
                <div class="chat-container">
                    <!-- Chat Header -->
                    <div class="chat-header">
                        <div class="partner-info">
                            <div class="partner-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="partner-details">
                                <span class="partner-name">محادث جديد</span>
                                <span id="typing-indicator" class="typing-indicator">يكتب...</span>
                            </div>
                        </div>
                        <div class="chat-controls">
                            <button id="video-call-btn" class="btn btn-icon" title="مكالمة فيديو">
                                <i class="fas fa-video"></i>
                            </button>
                            <button id="new-chat-btn" class="btn btn-icon" title="دردشة جديدة">
                                <i class="fas fa-refresh"></i>
                            </button>
                            <button id="end-chat-btn" class="btn btn-icon btn-danger" title="إنهاء الدردشة">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Video Call Area -->
                    <div id="video-area" class="video-area hidden">
                        <video id="remote-video" autoplay playsinline></video>
                        <video id="local-video" autoplay playsinline muted></video>
                        <div class="video-controls">
                            <button id="toggle-video-btn" class="btn btn-icon">
                                <i class="fas fa-video"></i>
                            </button>
                            <button id="toggle-audio-btn" class="btn btn-icon">
                                <i class="fas fa-microphone"></i>
                            </button>
                            <button id="end-video-btn" class="btn btn-icon btn-danger">
                                <i class="fas fa-phone-slash"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Messages Area -->
                    <div id="messages-area" class="messages-area">
                        <div class="system-message">
                            <i class="fas fa-info-circle"></i>
                            تم العثور على شريك! يمكنك الآن بدء المحادثة
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div class="input-area">
                        <div class="input-container">
                            <input type="text" id="message-input" placeholder="اكتب رسالتك هنا..." maxlength="500">
                            <button id="send-btn" class="btn btn-send">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Modal for video call -->
        <div id="video-call-modal" class="modal hidden">
            <div class="modal-content">
                <h3><i class="fas fa-video"></i> مكالمة فيديو واردة</h3>
                <p>هل تريد قبول مكالمة الفيديو؟</p>
                <div class="modal-actions">
                    <button id="accept-video-btn" class="btn btn-success">
                        <i class="fas fa-check"></i>
                        قبول
                    </button>
                    <button id="reject-video-btn" class="btn btn-danger">
                        <i class="fas fa-times"></i>
                        رفض
                    </button>
                </div>
            </div>
        </div>

        <!-- Connection Status -->
        <div id="connection-status" class="connection-status">
            <i class="fas fa-wifi"></i>
            <span>متصل</span>
        </div>
    </div>

    <!-- Sound Effects -->
    <audio id="message-sound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFApGn+T1v2obBjuR2e/NeSsFJHfH8N2QQAoUXrTp66hVFA==">
    </audio>

    <script src="/socket.io/socket.io.js"></script>
    <script src="webrtc.js"></script>
    <script src="app.js"></script>
</body>
</html>